<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>GSTIN Lookup</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <h1>GSTIN Lookup</h1>
    <form method="post">
        <label for="gstin">Enter GSTIN:</label>
        <input type="text" id="gstin" name="gstin" required>
        <button type="submit">Fetch</button>
    </form>

    {% if error %}
        <p class="error">{{ error }}</p>
    {% endif %}

    {% if data %}
    <div class="card">
        <h2>{{ data.tradeName }} ({{ data.gstin }})</h2>
        <p><strong>Legal Name:</strong> {{ data.lgnm }}</p>
        <p><strong>Company Type:</strong> {{ data.ctb }}</p>
        <p><strong>GST Status:</strong> {{ data.sts }}</p>
        <p><strong>Company Category:</strong> {{ data.compCategory }}</p>
        <p><strong>Nature of Business:</strong> {{ data.nba | join(', ') }}</p>
        <p><strong>Date of Registration:</strong> {{ data.rgdt }}</p>
        <p><strong>Address:</strong> {{ data.adr }}</p>
        <p><strong>Jurisdiction (Central):</strong> {{ data.ctj }}</p>
        <p><strong>Jurisdiction (State):</strong> {{ data.stj }}</p>
        <p><strong>HSN Codes:</strong> {{ data.hsn | join(', ') }}</p>
        <p><strong>E-Invoice Mandated:</strong> {{ data.mandatedeInvoice }}</p>
        <p><strong>E-Invoice Status:</strong> {{ data.einvoiceStatus }}</p>

        <div class="section">
            <h3>GST Returns Filed:</h3>
            <select>
                {% for ret in data.returns %}
                    <option>{{ ret.rtntype }} - {{ ret.taxp }} {{ ret.fy }} (Filed: {{ ret.dof }})</option>
                {% endfor %}
            </select>
        </div>

        <form action="/rate" method="post" style="margin-top: 20px;">
            <input type="hidden" name="gstin" value="{{ data.gstin }}">
            <button type="submit">Rate This Company</button>
        </form>
    </div>
    {% endif %}
</body>
</html>
